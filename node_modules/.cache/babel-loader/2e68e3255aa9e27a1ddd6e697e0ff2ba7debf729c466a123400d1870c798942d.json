{"ast":null,"code":"import{useState,useRef}from\"react\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function Calculator(){const[inputVal,setVal]=useState(\"\");const[finalResult,setFinalResult]=useState(0);const inputRef=useRef(\"\");const handleClick=e=>{const value=e.currentTarget.value;console.log(typeof value);// Update state and ref\nsetVal(prev=>{const updated=prev+value;inputRef.current=updated;// Keep latest value in ref\nreturn updated;});};const handleClear=e=>{setVal('');setFinalResult(0);};const finalCalculation=e=>{if(inputVal.trim()===''){setFinalResult(\"Error\");console.log(\"finalResult\",finalResult);return;}const numbersArr=[];const operatorsArr=[];let currentVal=\"\";for(let i=0;i<inputVal.length;i++){if(inputVal[i]==='*'||inputVal[i]===\"/\"||inputVal[i]===\"-\"||inputVal[i]===\"+\"){numbersArr.push(Number(currentVal));currentVal='';operatorsArr.push(inputVal[i]);}else{currentVal+=inputVal[i];}}if(currentVal!==''){numbersArr.push(Number(currentVal));}for(let i=0;i<operatorsArr.length;i++){if(operatorsArr[i]===\"*\"||operatorsArr[i]==='/'){const a=numbersArr[i];const b=numbersArr[i+1];if(a===0&&b===0){setFinalResult(\"NaN\");return;}const result=operatorsArr[i]===\"*\"?a*b:Math.floor(a/b);numbersArr.splice(i,2,result);operatorsArr.splice(i,1);i--;}}let final=numbersArr[0];for(let i=0;i<operatorsArr.length;i++){const op=operatorsArr[i];const num=numbersArr[i+1];if(op===\"+\")final+=num;else final-=num;}console.log(\"numbersArr----------\",numbersArr);console.log(\"operatorsArr----------\",operatorsArr);setFinalResult(final);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\" Calculator\"}),/*#__PURE__*/_jsxs(\"div\",{style:{paddingTop:'30px'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:inputVal,onChange:e=>{setVal(e.target.value);}}),/*#__PURE__*/_jsx(\"div\",{style:{paddingTop:'30px'},children:finalResult?finalResult:finalResult=='NaN'?'NaN':''}),/*#__PURE__*/_jsx(\"button\",{value:7,type:\"button\",onClick:handleClick,children:\"7\"}),/*#__PURE__*/_jsx(\"button\",{value:8,type:\"button\",onClick:handleClick,children:\"8\"}),/*#__PURE__*/_jsx(\"button\",{value:9,type:\"button\",onClick:handleClick,children:\"9\"}),/*#__PURE__*/_jsx(\"button\",{value:\"+\",type:\"button\",onClick:handleClick,children:\"+\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{value:4,type:\"button\",onClick:handleClick,children:\"4\"}),/*#__PURE__*/_jsx(\"button\",{value:5,type:\"button\",onClick:handleClick,children:\"5\"}),/*#__PURE__*/_jsx(\"button\",{value:6,type:\"button\",onClick:handleClick,children:\"6\"}),/*#__PURE__*/_jsx(\"button\",{value:\"-\",type:\"button\",onClick:handleClick,children:\"-\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{value:1,type:\"button\",onClick:handleClick,children:\"1\"}),/*#__PURE__*/_jsx(\"button\",{value:2,type:\"button\",onClick:handleClick,children:\"2\"}),/*#__PURE__*/_jsx(\"button\",{value:3,type:\"button\",onClick:handleClick,children:\"3\"}),/*#__PURE__*/_jsx(\"button\",{value:\"*\",type:\"button\",onClick:handleClick,children:\"*\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{value:7,type:\"button\",onClick:handleClear,children:\"C\"}),/*#__PURE__*/_jsx(\"button\",{value:0,type:\"button\",onClick:handleClick,children:\"0\"}),/*#__PURE__*/_jsx(\"button\",{value:\"=\",type:\"button\",onClick:finalCalculation,children:\"=\"}),/*#__PURE__*/_jsx(\"button\",{value:\"/\",type:\"button\",onClick:handleClick,children:\"/\"})]})]});}","map":{"version":3,"names":["useState","useRef","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Calculator","inputVal","setVal","finalResult","setFinalResult","inputRef","handleClick","e","value","currentTarget","console","log","prev","updated","current","handleClear","finalCalculation","trim","numbersArr","operatorsArr","currentVal","i","length","push","Number","a","b","result","Math","floor","splice","final","op","num","children","style","paddingTop","type","onChange","target","onClick"],"sources":["C:/Users/srinu/Downloads/country-app/calculator_frontend_typescript/src/components/calculator.tsx"],"sourcesContent":["import { useState, useRef } from \"react\"\r\n\r\nexport default function Calculator(){\r\n\r\n    const [inputVal,setVal] =useState<string>(\"\");\r\n    const [finalResult, setFinalResult] =useState<number|string>(0);\r\n      const inputRef = useRef<string>(\"\"); \r\n\r\n\r\n     const handleClick = (e: React.MouseEvent<HTMLButtonElement>) => {\r\n      const value = e.currentTarget.value;\r\n      console.log(typeof(value))\r\n\r\n    // Update state and ref\r\n    setVal((prev) => {\r\n      const updated = prev + value;\r\n      inputRef.current = updated; // Keep latest value in ref\r\n      return updated;\r\n    });\r\n  };\r\n\r\n\r\nconst handleClear = (e: React.MouseEvent<HTMLButtonElement>) => {\r\n    setVal('');\r\n    setFinalResult(0)\r\n}\r\n\r\n  const finalCalculation =(e: React.MouseEvent<HTMLButtonElement>) =>{\r\n    if(inputVal.trim() === ''){\r\n         setFinalResult(\"Error\");\r\n         console.log(\"finalResult\",finalResult); return\r\n    }\r\n    const numbersArr:number[]= [];\r\n    const operatorsArr:string[]=[];\r\n  let  currentVal = \"\";\r\n   for(let i=0 ; i< inputVal.length; i++){\r\n    if(inputVal[i]==='*' || inputVal[i]=== \"/\" || inputVal[i]=== \"-\" || inputVal[i]=== \"+\"){\r\n   numbersArr.push(Number(currentVal));\r\n   currentVal='';\r\noperatorsArr.push(inputVal[i]);\r\n\r\n    }\r\n    else{\r\n\r\n        currentVal+=inputVal[i];\r\n    }\r\n   }\r\n\r\n   if(currentVal !== ''){\r\n     numbersArr.push(Number(currentVal));\r\n   }\r\n  \r\nfor(let i =0; i< operatorsArr.length; i++){\r\nif(operatorsArr[i] === \"*\" || operatorsArr[i] === '/'){\r\nconst a= numbersArr[i];\r\nconst b= numbersArr[i+1];\r\nif(a===0 && b===0){\r\nsetFinalResult(\"NaN\");\r\nreturn;\r\n}\r\nconst result= operatorsArr[i]===\"*\"? a*b:  Math.floor(a/b);\r\nnumbersArr.splice(i, 2, result);\r\noperatorsArr.splice(i,1);\r\ni--;\r\n}\r\n\r\n\r\n}\r\nlet final = numbersArr[0];\r\n  for (let i = 0; i < operatorsArr.length; i++) {\r\n    const op = operatorsArr[i];\r\n    const num = numbersArr[i + 1];\r\n\r\n    if (op === \"+\") final += num;\r\n    else final -= num;\r\n  }\r\n console.log(\"numbersArr----------\",numbersArr);\r\n   console.log(\"operatorsArr----------\",operatorsArr);\r\n\r\nsetFinalResult(final);\r\n  }\r\n \r\n\r\n    return(\r\n        <>\r\n        <h2> Calculator</h2>\r\n        <div style={{paddingTop:'30px'}}>\r\n        <input type=\"text\" value={inputVal} onChange={(e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setVal(e.target.value)}}/>\r\n        \r\n        <div style={{paddingTop:'30px'}}>\r\n            {finalResult ? finalResult: (finalResult== 'NaN'? 'NaN' : '')}\r\n            {/* {finalResult} */}\r\n        </div>\r\n       \r\n        \r\n            <button value={7} type=\"button\" onClick={handleClick}>7</button>\r\n              <button value={8} type=\"button\"  onClick={handleClick}>8</button>\r\n              <button value={9} type=\"button\" onClick={handleClick}>9</button>\r\n               <button value='+' type=\"button\" onClick={handleClick}>+</button>\r\n        <br />\r\n             <button value={4} type=\"button\" onClick={handleClick}>4</button>\r\n             <button value={5} type=\"button\" onClick={handleClick}>5</button>\r\n              <button value={6} type=\"button\" onClick={handleClick}>6</button>\r\n               <button value='-' type=\"button\" onClick={handleClick}>-</button>\r\n               <br />\r\n             <button value={1} type=\"button\" onClick={handleClick}>1</button>\r\n             <button value={2} type=\"button\" onClick={handleClick}>2</button>\r\n              <button value={3} type=\"button\"onClick={handleClick}>3</button>\r\n               <button value='*' type=\"button\"onClick={handleClick}>*</button>\r\n               <br />\r\n             <button value={7} type=\"button\" onClick={handleClear}>C</button>\r\n             <button value={0} type=\"button\" onClick={handleClick}>0</button>\r\n              <button value='=' type=\"button\" onClick={finalCalculation}>=</button>\r\n               <button value='/' type=\"button\" onClick={handleClick}>/</button>\r\n        </div>\r\n\r\n\r\n\r\n      \r\n        </>\r\n    )\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}